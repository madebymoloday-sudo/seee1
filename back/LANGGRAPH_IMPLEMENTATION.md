# –†–µ–∞–ª–∏–∑–∞—Ü–∏—è LangGraph –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º –ø—Å–∏—Ö–æ–ª–æ–≥–∞

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–≥—Ä–∞–º–º

- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –ø–∞–ø–∫–∞ `programs/psychologist/` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- ‚úÖ –ü—Ä–æ–≥—Ä–∞–º–º—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ JSON —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–æ–≥—Ä–∞–º–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- ‚úÖ Hot reload –≤ development —Ä–µ–∂–∏–º–µ

### 2. ProgramLoaderService

- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö JSON —Ñ–∞–π–ª–æ–≤ –∏–∑ –ø–∞–ø–∫–∏
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–∞–º–º
- ‚úÖ –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º

### 3. PipelineService

- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–æ –∏–º–µ–Ω–∏ –¥–ª—è –∫–∞–∂–¥–æ–π —Å–µ—Å—Å–∏–∏
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–∑ –ø—Ä–æ–≥—Ä–∞–º–º—ã (temperature, model, maxTokens)
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ LLM –¥–ª—è –∫–∞–∂–¥–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ programName –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø–∞–π–ø–ª–∞–π–Ω–∞
- ‚úÖ –ö–∞–∂–¥–∞—è —Å–µ—Å—Å–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≤–æ—é –ø—Ä–æ–≥—Ä–∞–º–º—É –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ

### 4. API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º–∞–º–∏

- ‚úÖ `GET /api/v1/psychologist/programs` - —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–≥—Ä–∞–º–º
- ‚úÖ `GET /api/v1/psychologist/programs/:programName` - –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É –ø–æ –∏–º–µ–Ω–∏

### 5. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–µ—Å—Å–∏—è–º–∏

- ‚úÖ –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å `programName` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–µ—Å—Å–∏–∏
- ‚úÖ –ü—Ä–æ–≥—Ä–∞–º–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø–∞–π–ø–ª–∞–π–Ω–∞
- ‚úÖ –ö–∞–∂–¥–∞—è —Å–µ—Å—Å–∏—è –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ—é –ø—Ä–æ–≥—Ä–∞–º–º—É

## üìù –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã

1. –°–æ–∑–¥–∞–π—Ç–µ JSON —Ñ–∞–π–ª –≤ `programs/psychologist/`:

```json
{
  "name": "short",
  "version": "1.0.0",
  "description": "–°–æ–∫—Ä–∞—â–µ–Ω–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω",
  "steps": {
    "problem": {
      "question": "–ß—Ç–æ –≤–∞—Å –±–µ—Å–ø–æ–∫–æ–∏—Ç?",
      "systemPrompt": "..."
    }
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —à–∞–≥–∏
  },
  "settings": {
    "temperature": 0.7,
    "model": "gpt-4o-mini"
  }
}
```

2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä (–∏–ª–∏ –≤ dev —Ä–µ–∂–∏–º–µ - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—Å—è)

3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–µ—Å—Å–∏–∏:

```json
POST /api/v1/sessions
{
  "title": "–ú–æ—è —Å–µ—Å—Å–∏—è",
  "programName": "short"
}
```

### –°–º–µ–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã

```bash
POST /api/v1/psychologist/programs/short/load
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### LangGraph StateGraph

–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **ChatOpenAI –∏–∑ LangChain**, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **StateGraph –∏–∑ LangGraph.js** –Ω–∞–ø—Ä—è–º—É—é.

**–ü–æ—á–µ–º—É:**

- StateGraph –±–æ–ª—å—à–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –≥—Ä–∞—Ñ–æ–≤ —Å —É—Å–ª–æ–≤–Ω—ã–º–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏
- –¢–µ–∫—É—â–∏–π –ø–∞–π–ø–ª–∞–π–Ω - –ª–∏–Ω–µ–π–Ω—ã–π (–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ —à–∞–≥–∏)
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –ø—Ä–æ—Å—Ç—ã–µ –º–µ—Ç–æ–¥—ã –±–æ–ª–µ–µ –≥–∏–±–∫–∞—è –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ JSON

**–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å StateGraph:**
–ú–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–µ–ª–∞—Ç—å –Ω–∞ StateGraph –¥–ª—è –±–æ–ª–µ–µ —Ñ–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ –≥—Ä–∞—Ñ–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤, –Ω–æ —ç—Ç–æ —É—Å–ª–æ–∂–Ω–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞–π–ø–ª–∞–π–Ω–∞ —á–µ—Ä–µ–∑ JSON.

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. ‚úÖ **–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è** –¥–ª—è –≥–∏–±–∫–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–∞–π–ø–ª–∞–π–Ω–æ–≤ —á–µ—Ä–µ–∑ JSON
2. ‚úÖ **–ü—Ä–æ–≥—Ä–∞–º–º—ã –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã** - –∫–∞–∂–¥–∞—è —Å–µ—Å—Å–∏—è –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ—é –ø—Ä–æ–≥—Ä–∞–º–º—É
3. ‚úÖ **–õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã** - –ø—Ä–æ—Å—Ç–æ —Å–æ–∑–¥–∞—Ç—å JSON —Ñ–∞–π–ª
4. ‚úÖ **Hot reload** –≤ development —Ä–µ–∂–∏–º–µ

## üîÑ –£–ª—É—á—à–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é JSON —Å—Ö–µ–º—ã –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º
2. –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º
3. –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º
4. –ú–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å StateGraph –¥–ª—è –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö –ø–∞–π–ø–ª–∞–π–Ω–æ–≤
