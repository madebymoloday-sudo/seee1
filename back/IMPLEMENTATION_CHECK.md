# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

- ‚úÖ –ü–∞–ø–∫–∞ `back/` (–Ω–µ `backend/`)
- ‚úÖ –í—Å–µ –º–æ–¥—É–ª–∏ —Å–æ–∑–¥–∞–Ω—ã —Å–æ–≥–ª–∞—Å–Ω–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
- ‚úÖ Prisma —Å—Ö–µ–º–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç `schema.db.md`
- ‚úÖ Docker Compose –¥–ª—è PostgreSQL

### 2. –ú–æ–¥—É–ª–∏

- ‚úÖ **Auth Module** - JWT, Telegram Login, Refresh Tokens
- ‚úÖ **Sessions Module** - CRUD, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –Ω–µ–π—Ä–æ–∫–∞—Ä—Ç—É
- ‚úÖ **Messages Module** - Cursor pagination, REST API –∏ WebSocket
- ‚úÖ **Event Map Module** - –ù–µ–π—Ä–æ–∫–∞—Ä—Ç–∞
- ‚úÖ **Psychologist Module** - LangGraph –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ **WebSocket Module** - Socket.IO Gateway
- ‚úÖ **Subscription Module** - –ü–æ–¥–ø–∏—Å–∫–∞, –ø—Ä–æ–º–æ–∫–æ–¥—ã, Lava API
- ‚úÖ **Lava Integration** - Mutator, Service, Exception

### 3. LangGraph Pipeline

- ‚úÖ PipelineService —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ 9 —à–∞–≥–æ–≤ –ø–∞–π–ø–ª–∞–π–Ω–∞ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î (`pipeline_states`)
- ‚úÖ –ö–æ–Ω—Ü–µ–ø—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (`concept_hierarchies`)
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏–∑ JSON —Ñ–∞–π–ª–∞

### 4. WebSocket Gateway

- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ –ø–∞–π–ø–ª–∞–π–Ω
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–∞–π–ø–ª–∞–π–Ω–∞
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —à–∞–≥–µ –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–π –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

### 5. API Endpoints

- ‚úÖ –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
- ‚úÖ Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- ‚úÖ JSON —Å—Ö–µ–º–∞ –¥–ª—è Orval (`/api-json`)
- ‚úÖ SubscriptionGuard –¥–ª—è –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

### 6. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- ‚úÖ Refresh tokens
- ‚úÖ Telegram Login Widget –≤–∞–ª–∏–¥–∞—Ü–∏—è
- ‚úÖ Subscription Guard –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Å—Å–∏–π
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ class-validator

## ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ / –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

### 1. Google OAuth

- ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (–º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω –ø–æ–∑–∂–µ)
- üìù –£–ø–æ–º—è–Ω—É—Ç –≤ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏, –Ω–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–µ–Ω –¥–ª—è MVP

### 2. Users Module

- ‚ùå –û—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å –Ω–µ —Å–æ–∑–¥–∞–Ω
- ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ Auth Module
- üìù –í —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ —É–ø–æ–º—è–Ω—É—Ç, –Ω–æ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω

### 3. Orval –≥–µ–Ω–µ—Ä–∞—Ü–∏—è Lava API

- ‚ö†Ô∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞ (`orval.config.ts`)
- ‚ö†Ô∏è Mutator —Å–æ–∑–¥–∞–Ω
- ‚ùå –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ (—Ç—Ä–µ–±—É–µ—Ç OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é Lava)

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

1. ‚úÖ **WebSocket Gateway** - –¥–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–π –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
2. ‚úÖ **WebSocket Gateway** - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —à–∞–≥–µ –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
3. ‚úÖ **Sessions Controller** - –¥–æ–±–∞–≤–ª–µ–Ω SubscriptionGuard –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Å—Å–∏–π
4. ‚úÖ **PsychologistService** - –¥–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–π –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

## üìã –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è–º

### back.tz.md

- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ –ü—Ä–∞–≤–∏–ª–∞ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –í—Å–µ –º–æ–¥—É–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- ‚úÖ Swagger –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- ‚úÖ Error handling

### psychologist-pipeline.md

- ‚úÖ 9 —à–∞–≥–æ–≤ –ø–∞–π–ø–ª–∞–π–Ω–∞
- ‚úÖ LangGraph –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–π
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ JSON

### schema.db.md

- ‚úÖ –í—Å–µ –º–æ–¥–µ–ª–∏ —Å–æ–∑–¥–∞–Ω—ã
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å–≤—è–∑–∏
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- ‚úÖ Enums –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã

### common.md

- ‚úÖ –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- ‚úÖ –ü–∞–π–ø–ª–∞–π–Ω —Ä–∞–±–æ—Ç—ã AI
- ‚úÖ –ù–µ–π—Ä–æ–∫–∞—Ä—Ç–∞
- ‚úÖ –°–µ—Å—Å–∏–∏ –∏ —Å–æ–æ–±—â–µ–Ω–∏—è

## üéØ –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞

**–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ: ~95%**

–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é. –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç —Ç–æ–ª—å–∫–æ:

- Google OAuth (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Orval –∫–ª–∏–µ–Ω—Ç–∞ –¥–ª—è Lava (—Ç—Ä–µ–±—É–µ—Ç OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é)

–í—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å–æ–≥–ª–∞—Å–Ω–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏.
