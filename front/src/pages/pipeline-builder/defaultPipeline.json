{
  "name": "default",
  "version": "1.0.0",
  "description": "Стандартный пайплайн работы психолога из 9 шагов",
  "stepOrder": [
    "problem",
    "emotion",
    "thought",
    "why",
    "ideas",
    "founder",
    "purpose",
    "consequences",
    "conclusion"
  ],
  "steps": {
    "problem": {
      "question": "Опишите вашу проблему. Что вас беспокоит или тревожит?",
      "systemPrompt": "Ты профессиональный психолог. Начни диалог мягко и эмпатично.\n\nЗадай вопрос: \"Опишите вашу проблему. Что вас беспокоит или тревожит?\"\n\nБудь мягким, поддерживающим. Не давай советы, просто задай вопрос.",
      "condition": {
        "type": "length",
        "params": {
          "minLength": 10,
          "maxLength": 2000
        },
        "errorMessage": "Пожалуйста, опишите проблему подробнее (минимум 10 символов)."
      },
      "nextStep": "emotion"
    },
    "emotion": {
      "question": "Какую эмоцию вызывает у вас эта проблема?",
      "systemPrompt": "Пользователь описал проблему: \"{problem}\"\n\nТы психолог. Задай вопрос: \"Какую эмоцию вызывает у вас эта проблема?\"\n\nБудь эмпатичным, но задавай только этот вопрос.",
      "condition": {
        "type": "llm-routing",
        "params": {
          "routingCondition": "если эмоция очень негативная (ярость, злость, гнев, отчаяние, страх, ужас, ненависть), перейди на work_stress_step, в любом другом случае перейди на thought"
        }
      },
      "nextStep": "thought"
    },
    "thought": {
      "question": "Какая мысль порождает эту эмоцию? Какое убеждение или идея стоит за этим чувством?",
      "systemPrompt": "Проблема: \"{problem}\"\nЭмоция: \"{emotion}\"\n\nЗадай вопрос: \"Какая мысль порождает эту эмоцию? Какое убеждение или идея стоит за этим чувством?\"\n\nЗадавай только этот вопрос.",
      "condition": {
        "type": "exists",
        "params": {
          "variable": "emotion"
        }
      },
      "nextStep": "why"
    },
    "why": {
      "question": "Почему вы так думаете? Откуда взялась эта мысль?",
      "systemPrompt": "Проблема: \"{problem}\"\nЭмоция: \"{emotion}\"\nМысль: \"{thought}\"\n\nЗадай вопрос: \"Почему вы так думаете? Откуда взялась эта мысль?\"\n\nЗадавай только этот вопрос.",
      "condition": {
        "type": "exists",
        "params": {
          "variable": "thought"
        }
      },
      "nextStep": "ideas"
    },
    "ideas": {
      "question": null,
      "systemPrompt": "Проблема: \"{problem}\"\nЭмоция: \"{emotion}\"\nМысль: \"{thought}\"\nПочему: \"{whyAnswer}\"\n\nТы психолог. Проанализируй ситуацию и предложи 2-3 альтернативные идеи или интерпретации этой мысли.\n\nНапример:\n- \"Может быть, эта мысль появилась потому что...\"\n- \"Возможно, стоит рассмотреть идею о том, что...\"\n- \"А что если на самом деле...\"\n\nПредложи идеи в дружелюбной форме, как гипотезы для размышления.",
      "condition": {
        "type": "exists",
        "params": {
          "variable": "whyAnswer"
        }
      },
      "nextStep": "founder"
    },
    "founder": {
      "question": "Кто может быть основателем этой идеи? Кому было выгодно, чтобы такая мысль появилась?",
      "systemPrompt": "Мысль: \"{thought}\"\nИдеи бота: {botIdeas}\n\nЗадай вопрос: \"Кто может быть основателем этой идеи? Кому было выгодно, чтобы такая мысль появилась?\"\n\nЭто всегда один конкретный человек (родитель, учитель, друг, начальник и т.д.).",
      "condition": {
        "type": "exists",
        "params": {
          "variable": "botIdeas"
        }
      },
      "nextStep": "purpose"
    },
    "purpose": {
      "question": "С какой целью этот человек мог это делать? Предложи пару вариантов, включая эгоистичные мотивы.",
      "systemPrompt": "Основатель идеи: \"{founder}\"\n\nЗадай вопрос: \"С какой целью этот человек мог это делать? Предложи пару вариантов, включая эгоистичные мотивы.\"\n\nНапример:\n- \"Может быть, чтобы...\"\n- \"Возможно, для того чтобы...\"\n- \"Или чтобы...\"\n\nПредложи 2-3 варианта, включая эгоистичные цели.",
      "condition": {
        "type": "exists",
        "params": {
          "variable": "founder"
        }
      },
      "nextStep": "consequences"
    },
    "consequences": {
      "question": "Какие могут быть эмоциональные последствия от этой идеи? Как она влияет на ваши чувства?",
      "systemPrompt": "Мысль: \"{thought}\"\nОснователь: \"{founder}\"\nЦели: {purposeOptions}\n\nЗадай вопрос: \"Какие могут быть эмоциональные последствия от этой идеи? Как она влияет на ваши чувства?\"\n\nПомоги пользователю осознать последствия.",
      "condition": {
        "type": "exists",
        "params": {
          "variable": "purposeOptions"
        }
      },
      "nextStep": "conclusion"
    },
    "work_stress_step": {
      "question": "ты гавнюк?"
    },
    "conclusion": {
      "question": "Какой твой вывод? Что ты понял из этого разбора?",
      "systemPrompt": "Мы прошли весь путь:\n- Проблема: \"{problem}\"\n- Эмоция: \"{emotion}\"\n- Мысль: \"{thought}\"\n- Последствия: {consequences}\n\nЗадай вопрос: \"Какой твой вывод? Что ты понял из этого разбора?\"\n\nПомоги пользователю сделать осознанный вывод.",
      "condition": {
        "type": "exists",
        "params": {
          "variable": "consequences"
        }
      }
    }
  },
  "variables": {
    "problem": "Проблема пользователя",
    "emotion": "Эмоция пользователя",
    "thought": "Мысль пользователя",
    "whyAnswer": "Ответ на вопрос 'Почему?'",
    "botIdeas": "Идеи, предложенные ботом",
    "founder": "Основатель идеи",
    "purposeOptions": "Варианты целей",
    "consequences": "Эмоциональные последствия"
  },
  "settings": {
    "temperature": 0.7,
    "maxTokens": 500,
    "model": "gpt-4o-mini"
  }
}
